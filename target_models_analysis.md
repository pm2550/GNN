# 目标大小模型分段对比分析

## 模型选择标准

基于以下标准选择了5个代表性模型：
- 模型大小接近30MiB或在30-50MiB范围内
- 涵盖不同的网络架构类型
- 具有良好的TPU兼容性

## 模型概览

| 模型名称 | 预估大小(MB) | 参数数 | 架构类型 | 处理状态 | 段数 |
|---------|------------|--------|---------|---------|-----|
| Xception | 26.2 | 22,910,480 | 深度可分离卷积 | ✅ 成功 | 3 |
| InceptionV3 | 27.3 | 23,851,784 | 多分支网络 | ❌ 失败 | - |
| ResNet50 | 29.3 | 25,636,712 | 残差网络 | ✅ 成功 | 4 |
| EfficientNetB5 | 35.0 | 30,562,527 | 复合缩放网络 | ❌ 失败 | - |
| ResNet101 | 51.2 | 44,707,176 | 残差网络 | ✅ 成功 | 6 |

## 分段结果分析

### 成功处理的模型

#### Xception

- **预估大小**: 26.2 MB
- **实际参数**: 22,910,480
- **分段数**: 3
- **切点数**: 2
- **主要切点**: add_6, add_10
- **架构特点**: 深度可分离卷积架构，接近30MB
- **输出目录**: `/workplace/models/public/xception_greedy_under7`

#### ResNet50

- **预估大小**: 29.3 MB
- **实际参数**: 25,636,712
- **分段数**: 4
- **切点数**: 3
- **主要切点**: conv4_block5_add, conv5_block1_add, conv5_block2_add
- **架构特点**: 经典残差网络，非常接近30MB
- **输出目录**: `/workplace/models/public/resnet50_greedy_under7`

#### ResNet101

- **预估大小**: 51.2 MB
- **实际参数**: 44,707,176
- **分段数**: 6
- **切点数**: 5
- **主要切点**: conv4_block5_out, conv4_block11_out, conv4_block17_out...
- **架构特点**: 更深的残差网络，稍大但可用
- **输出目录**: `/workplace/models/public/resnet101_greedy_under7`

## 通用切分规则验证

通过处理这5个不同架构的模型，验证了基于4D特征图模块出口的通用切分规则的有效性：

1. **ResNet系列**: 使用 `*_add` 和 `*_out` 层作为切点
2. **Inception系列**: 使用 `mixed*` 和 `activation*` 层作为切点
3. **Xception**: 使用 `activation*` 和分离卷积出口作为切点
4. **EfficientNet**: 使用 `activation*` 和 `add*` 层作为切点

## 结论

该通用切分算法成功适配了多种不同架构的CNN模型，证明了基于4D特征图模块出口的切点识别策略的通用性和有效性。
